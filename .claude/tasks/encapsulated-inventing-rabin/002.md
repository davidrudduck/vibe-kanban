---
name: Add model extraction helpers to useDefaultVariant
status: completed
created: 2026-01-23T08:40:46Z
updated: 2026-01-23T09:50:00Z
depends_on: []
parallel: true
conflicts_with: [003]
---

# Task: Add model extraction helpers to useDefaultVariant

## Description
Extend the `useDefaultVariant` hook with helper functions to extract model names from variant configurations and detect model changes between variants.

## Acceptance Criteria
- [x] `getModelFromVariantConfig()` helper function added
- [x] `wouldModelChange()` callback implemented
- [x] `previousVariantInfo` memo added to return value
- [x] Functions correctly handle null/undefined profiles
- [x] TypeScript types correct

## Technical Details

**File Location**: `frontend/src/hooks/follow-up/useDefaultVariant.ts`

**Helper Function**: `getModelFromVariantConfig()`
```typescript
function getModelFromVariantConfig(
  profiles: Record<string, ExecutorConfig> | null,
  executor: string,
  variant: string | null
): string | null
```
- Extracts model from variant config
- Handles DEFAULT variant fallback
- Supports CLAUDE_CODE, GEMINI, and other executors
- Returns null if not found

**Callback**: `wouldModelChange(newVariant: string | null): boolean`
- Uses `useCallback` with `[latestProfileId, profiles]` dependencies
- Compares previous model to new variant's model
- Returns true if models differ

**Memo**: `previousVariantInfo`
```typescript
useMemo(() => ({
  variant: latestProfileId?.variant ?? 'DEFAULT',
  model: latestProfileId ? getModelFromVariantConfig(...) : null,
}), [latestProfileId, profiles])
```

**Return Value Update**:
```typescript
return {
  selectedVariant,
  setSelectedVariant,
  currentProfile,
  wouldModelChange,
  previousVariantInfo
} as const;
```

## Dependencies
- Must understand existing ExecutorConfig types
- Access to latestProfileId from hook

## Effort Estimate
- Size: S
- Hours: 1
- Parallel: true (conflicts with 003 - same file)

## Definition of Done
- [x] Helper function added and working
- [x] Model extraction handles all executor types
- [x] wouldModelChange callback returns correct boolean
- [x] previousVariantInfo memo provides correct data
- [x] Return value includes new exports
- [x] No TypeScript errors
- [x] No breaking changes to existing consumers

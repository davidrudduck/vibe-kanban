---
name: Add model() method to CodingAgent enum
status: complete
created: 2026-01-23T08:40:46Z
updated: 2026-01-23T10:40:00Z
depends_on: []
parallel: true
conflicts_with: []
---

# Task: Add model() method to CodingAgent enum

## Description
Add a method to the `CodingAgent` enum that returns the configured model name (if any) for each executor variant. This enables the backend to detect when models change between follow-up sessions.

## Acceptance Criteria
- [x] `model()` method added to CodingAgent impl block
- [x] Method returns `Option<&str>`
- [x] All executor variants handled in match arms
- [x] Returns None for executors without configurable models

## Technical Details

**File Location**: `crates/executors/src/executors/mod.rs` (around line 177)

**Method Signature**:
```rust
impl CodingAgent {
    /// Get the model name if configured, or None for default model
    pub fn model(&self) -> Option<&str> {
        match self {
            Self::ClaudeCode(c) => c.model.as_deref(),
            Self::Amp(_) => None, // Amp doesn't have configurable model
            Self::Gemini(c) => c.model.as_deref(),
            Self::Codex(c) => c.model.as_deref(),
            Self::Opencode(c) => c.model.as_deref(),
            Self::CursorAgent(c) => c.model.as_deref(),
            Self::QwenCode(c) => c.model.as_deref(),
            Self::Copilot(c) => c.model.as_deref(),
            Self::Droid(c) => c.model.as_deref(),
        }
    }
}
```

**Key Points**:
- Use `.as_deref()` to convert `Option<String>` to `Option<&str>`
- Return `None` for executors that don't expose model configuration
- Method is public for use in route handlers

## Dependencies
- None

## Effort Estimate
- Size: XS
- Hours: 0.25
- Parallel: true

## Definition of Done
- [x] Method added to CodingAgent impl block
- [x] All match arms handle their executor variant
- [x] Compiles without errors
- [x] Clippy passes (no new errors introduced)
- [x] Code follows project conventions

## Implementation Notes
- Implementation added at line 193-206 in `crates/executors/src/executors/mod.rs`
- Amp and QwenCode return None (no model field)
- All other executors use `.as_deref()` to convert `Option<String>` to `Option<&str>`
- Executors crate builds successfully
- Note: QwenCode also returns None (no model field in struct)

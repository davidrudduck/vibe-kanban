---
name: Add retry handler in TaskFormSheet
status: open
created: 2026-01-11T10:25:38Z
updated: 2026-01-11T10:25:38Z
depends_on: [008]
conflicts_with: []
---

# Task: Add retry handler in TaskFormSheet

## Description
Add the state and handler for template retry functionality in TaskFormSheet component, and pass it to TemplatePicker.

## Acceptance Criteria
- [ ] templateRetryCount state added
- [ ] handleRetryTemplates callback implemented
- [ ] onRetry prop passed to TemplatePicker
- [ ] useEffect dependency array includes templateRetryCount

## Technical Details
- File: `frontend/src/components/dialogs/tasks/TaskFormSheet.tsx`

1. Add state after line 147:
```typescript
const [templateRetryCount, setTemplateRetryCount] = useState(0);
```

2. Add handler:
```typescript
const handleRetryTemplates = useCallback(() => {
  setTemplateRetryCount(c => c + 1);
}, []);
```

3. Update useEffect dependencies (line ~551):
```typescript
}, [showTemplatePicker, t, templateRetryCount]);
```

4. Pass to TemplatePicker:
```tsx
<TemplatePicker
  // ... existing props
  onRetry={handleRetryTemplates}
/>
```

## Dependencies
- [ ] TemplatePicker must accept onRetry (task 008)

## Effort Estimate
- Size: S
- Hours: 0.5

## Definition of Done
- [ ] State and handler implemented
- [ ] Prop passed correctly
- [ ] Retry functionality works end-to-end

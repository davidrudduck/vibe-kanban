---
name: Write tests for task cleanup function
status: complete
created: 2026-01-12T09:52:07Z
updated: 2026-01-13T10:06:00Z
depends_on: []
conflicts_with: []
---

# Task: Write tests for task cleanup function

## Description
Create tests in `crates/db/src/models/task/sync.rs` that verify the `clear_all_shared_task_ids_for_project()` function properly clears sync references.

## Acceptance Criteria
- [x] Test creates project and tasks with `shared_task_id` values
- [x] Test calls `clear_all_shared_task_ids_for_project()`
- [x] Test verifies all tasks have NULL `shared_task_id` after cleanup
- [x] Test verifies `remote_version` reset to 0
- [x] Test verifies `remote_last_synced_at` is NULL

## Technical Details
- Location: `crates/db/src/models/task/sync.rs` (tests module)
- Test name: `test_clear_all_shared_task_ids_for_project`
- Use `create_test_pool()` for database

## Dependencies
- No dependencies

## Effort Estimate
- Size: XS
- Hours: 0.5

## Definition of Done
- [x] Test code written
- [x] Test documented
- [x] Test compiles (expected to fail until Task 006 implements the function)

---
name: Write test_reject_if_remote_allows_local_project
status: open
created: 2026-01-12T00:16:47Z
updated: 2026-01-12T00:16:47Z
depends_on: [001]
conflicts_with: [001, 002]
---

# Task: Write test_reject_if_remote_allows_local_project

## Description
Write the second test case that verifies the `reject_if_remote` helper function correctly returns `Ok(())` when a task attempt belongs to a local project (is_remote = false).

## Acceptance Criteria
- [ ] Test `test_reject_if_remote_allows_local_project` added to test module
- [ ] Test creates a local project (is_remote = false)
- [ ] Test creates a task and task_attempt associated with the local project
- [ ] Test verifies `reject_if_remote` returns `Ok(())`
- [ ] Test FAILS to compile initially (function doesn't exist yet - RED phase)

## Technical Details
- Implementation approach: Use `create_test_pool()` to get isolated test database
- Key considerations:
  - Project must have `is_remote = false` (no source_node_id)
  - Must insert task and task_attempt with proper foreign keys
- Code locations/files affected: `crates/server/src/routes/message_queue.rs` (tests module)

## Dependencies
- [ ] Task 001 - test module structure must exist

## Effort Estimate
- Size: S
- Hours: 0.5

## Definition of Done
- [ ] Test code written
- [ ] Test fails to compile (expected - function doesn't exist yet)
